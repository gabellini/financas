<?php
$questions = [
  [
    'question' => 'Qual foi o principal objetivo do Plano Real iniciado em 1994?',
    'correct' => 'Controlar a infla√ß√£o e estabilizar os pre√ßos no pa√≠s',
    'alternatives' => [
      'Aumentar os impostos para todos os produtos',
      'Trocar o real por outra moeda estrangeira',
      'Acabar com o uso de cart√µes de cr√©dito'
    ]
  ],
  [
    'question' => 'O que √© infla√ß√£o?',
    'correct' => 'Aumento cont√≠nuo dos pre√ßos de produtos e servi√ßos',
    'alternatives' => [
      'Queda r√°pida do valor dos sal√°rios',
      'Promo√ß√£o especial em apenas um mercado',
      'Desconto por pagar √† vista'
    ]
  ],
  [
    'question' => 'Como chamamos o h√°bito de guardar uma parte do sal√°rio todo m√™s?',
    'correct' => 'Fazer uma poupan√ßa',
    'alternatives' => [
      'Assumir novas d√≠vidas',
      'Comprar tudo em v√°rias parcelas',
      'Pagar apenas contas atrasadas'
    ]
  ],
  [
    'question' => 'O que √© um or√ßamento pessoal?',
    'correct' => 'Planejamento das entradas e sa√≠das de dinheiro',
    'alternatives' => [
      'Lista de desejos para comprar no futuro',
      'Contrato de trabalho com a empresa',
      'Registro de notas fiscais do m√™s'
    ]
  ],
  [
    'question' => 'O que acontece se voc√™ n√£o pagar a fatura do cart√£o de cr√©dito completa?',
    'correct' => 'S√£o cobrados juros altos sobre o valor restante',
    'alternatives' => [
      'O banco devolve o dinheiro gasto',
      'A d√≠vida some depois de 30 dias',
      'A fatura seguinte fica automaticamente mais barata'
    ]
  ],
  [
    'question' => 'Qual √© a principal fun√ß√£o da reserva de emerg√™ncia?',
    'correct' => 'Cobrir imprevistos sem precisar fazer d√≠vidas',
    'alternatives' => [
      'Comprar presentes em datas comemorativas',
      'Pagar viagens internacionais todos os anos',
      'Financiar apenas cursos de idiomas'
    ]
  ],
  [
    'question' => 'Por que comparar pre√ßos antes de comprar?',
    'correct' => 'Para encontrar a melhor oferta e economizar dinheiro',
    'alternatives' => [
      'Para gastar tudo de uma vez',
      'Para aumentar o limite do cart√£o',
      'Para pagar mais caro de prop√≥sito'
    ]
  ],
  [
    'question' => 'Qual desses gastos √© considerado fixo?',
    'correct' => 'Aluguel pago todo m√™s',
    'alternatives' => [
      'Conta de luz que muda conforme o uso',
      'Compra de roupas em liquida√ß√£o',
      'Passeios nos fins de semana'
    ]
  ],
  [
    'question' => 'Qual √© uma boa pr√°tica ao receber o sal√°rio?',
    'correct' => 'Separar primeiro o valor das contas essenciais',
    'alternatives' => [
      'Gastar tudo com lazer e depois pensar nas contas',
      'Deixar todo o dinheiro parado em casa',
      'Assinar novos servi√ßos antes de planejar'
    ]
  ],
  [
    'question' => 'O que significa sal√°rio m√≠nimo?',
    'correct' => 'Menor valor que o empregador pode pagar por lei',
    'alternatives' => [
      'Valor m√°ximo que algu√©m pode receber no m√™s',
      'Pagamento opcional oferecido pelas empresas',
      'Soma de todos os benef√≠cios sociais'
    ]
  ],
  [
    'question' => 'O que s√£o juros?',
    'correct' => 'Custo de usar dinheiro emprestado ou ganho por emprestar',
    'alternatives' => [
      'Imposto cobrado em compras √† vista',
      'Promo√ß√£o dada a clientes fi√©is',
      'Desconto autom√°tico na fatura de luz'
    ]
  ],
  [
    'question' => 'Quando um produto est√° em promo√ß√£o, o que devemos verificar primeiro?',
    'correct' => 'Se o pre√ßo com desconto cabe no or√ßamento',
    'alternatives' => [
      'Se a cor combina com todas as roupas',
      'Se o item est√° em moda nas redes sociais',
      'Se o limite do cart√£o vai aumentar'
    ]
  ],
  [
    'question' => 'Qual vantagem de pagar contas em dia?',
    'correct' => 'Evitar multas e juros extras',
    'alternatives' => [
      'Receber pr√™mios em dinheiro automaticamente',
      'Gastar mais com tarifas banc√°rias',
      'Aumentar as d√≠vidas com o banco'
    ]
  ],
  [
    'question' => 'O que √© CDI?',
    'correct' => 'Taxa de refer√™ncia que os bancos usam em investimentos',
    'alternatives' => [
      'Nome de um imposto cobrado no supermercado',
      'Cart√£o de descontos para estudantes',
      'Aplicativo para pagar boletos'
    ]
  ],
  [
    'question' => 'Por que √© importante ter metas financeiras?',
    'correct' => 'Para orientar escolhas e priorizar os gastos do dia a dia',
    'alternatives' => [
      'Para gastar mais r√°pido o sal√°rio',
      'Para evitar pensar sobre dinheiro',
      'Para nunca mais guardar nenhum valor'
    ]
  ],
  [
    'question' => 'Qual atitude ajuda a evitar compras por impulso?',
    'correct' => 'Esperar um tempo e avaliar se realmente precisa',
    'alternatives' => [
      'Comprar assim que ver na vitrine',
      'Pedir empr√©stimo para aproveitar a oferta',
      'Pagar em muitas parcelas sem pensar'
    ]
  ],
  [
    'question' => 'Ao anotar gastos em um caderno ou aplicativo, voc√™ est√°...',
    'correct' => 'Controlando para saber para onde vai o dinheiro',
    'alternatives' => [
      'Aumentando o limite do cart√£o de cr√©dito',
      'Pagando menos impostos automaticamente',
      'Trocando despesas fixas por vari√°veis'
    ]
  ],
  [
    'question' => 'O que significa diversificar investimentos?',
    'correct' => 'Aplicar em diferentes tipos para reduzir riscos',
    'alternatives' => [
      'Colocar todo o dinheiro em um √∫nico produto',
      'Gastar tudo com viagens e lazer',
      'Evitar qualquer aplica√ß√£o financeira'
    ]
  ],
  [
    'question' => 'Qual √© uma caracter√≠stica da poupan√ßa?',
    'correct' => 'Permite resgatar o dinheiro com facilidade',
    'alternatives' => [
      'N√£o pode ser usada por menores de idade',
      'Trava o valor por 10 anos',
      'Garante lucros iguais aos da bolsa de valores'
    ]
  ],
  [
    'question' => 'O que representa o IPCA?',
    'correct' => '√çndice que mede a infla√ß√£o oficial do pa√≠s',
    'alternatives' => [
      'Programa de incentivo ao empreendedor',
      'Imposto pago em contas de energia',
      'Cart√£o de benef√≠cios para aposentados'
    ]
  ],
  [
    'question' => 'Por que entender os impostos da nota fiscal √© √∫til?',
    'correct' => 'Mostra quanto do pre√ßo vai para tributos',
    'alternatives' => [
      'Libera o pagamento da fatura do cart√£o',
      'Diminui o valor do aluguel',
      'Multiplica o sal√°rio automaticamente'
    ]
  ],
  [
    'question' => 'Qual √© um exemplo de investimento de renda fixa simples?',
    'correct' => 'Tesouro Selic',
    'alternatives' => [
      'A√ß√µes de empresas arriscadas',
      'Compra de moedas estrangeiras para viajar',
      'Colecionar figurinhas raras'
    ]
  ],
  [
    'question' => 'Quando os pre√ßos sobem e o sal√°rio fica igual, o poder de compra...',
    'correct' => 'Diminui',
    'alternatives' => [
      'Aumenta muito',
      'Permanece igual ou melhora',
      'Depende apenas da taxa de c√¢mbio'
    ]
  ],
  [
    'question' => 'Qual √© a melhor defini√ß√£o de lucro?',
    'correct' => 'Diferen√ßa entre o que entra e o que sai depois de pagar custos',
    'alternatives' => [
      'Todo o dinheiro recebido antes das despesas',
      'Valor guardado em casa para emerg√™ncias',
      'Montante emprestado por amigos'
    ]
  ],
  [
    'question' => 'O que significa pagar √† vista?',
    'correct' => 'Quitar o valor total no momento da compra',
    'alternatives' => [
      'Dividir em v√°rias parcelas com juros',
      'Pagar apenas metade agora e metade nunca',
      'Emprestar o produto sem pagar'
    ]
  ],
  [
    'question' => 'Qual √© um cuidado ao pedir empr√©stimo?',
    'correct' => 'Avaliar se as parcelas cabem no or√ßamento',
    'alternatives' => [
      'Aceitar qualquer taxa de juros dispon√≠vel',
      'Aumentar os gastos depois de pegar o dinheiro',
      'Usar o valor para quitar contas que j√° estavam pagas'
    ]
  ],
  [
    'question' => 'Por que guardar notas fiscais de compras importantes?',
    'correct' => 'Servem como comprovante em trocas ou garantias',
    'alternatives' => [
      'Geram juros sobre o valor da compra',
      'Aumentam o limite da conta banc√°ria',
      'Substituem a necessidade de or√ßamento'
    ]
  ],
  [
    'question' => 'O que √© capital de giro em um pequeno neg√≥cio?',
    'correct' => 'Dinheiro para pagar contas do dia a dia enquanto as vendas n√£o entram',
    'alternatives' => [
      'Valor guardado s√≥ para festas da empresa',
      'Lucro l√≠quido acumulado ao final do ano',
      'Dinheiro usado apenas para publicidade'
    ]
  ],
  [
    'question' => 'Qual benef√≠cio de estudar educa√ß√£o financeira cedo?',
    'correct' => 'Ajuda a tomar decis√µes mais conscientes no futuro',
    'alternatives' => [
      'Elimina todas as contas da casa',
      'Garante riqueza imediata',
      'Dispensa o uso de bancos e carteiras digitais'
    ]
  ],
  [
    'question' => 'Quando dizemos que um investimento tem liquidez di√°ria, quer dizer que...',
    'correct' => 'Pode ser resgatado em qualquer dia √∫til',
    'alternatives' => [
      'Tem rendimento garantido de 10% ao m√™s',
      'S√≥ pode ser vendido ap√≥s 5 anos',
      'Funciona apenas em finais de semana'
    ]
  ],
  [
    'question' => 'Qual √© a fun√ß√£o do Banco Central?',
    'correct' => 'Controlar a moeda e ajudar na estabilidade econ√¥mica',
    'alternatives' => [
      'Definir pre√ßos dos supermercados',
      'Assinar carteiras de trabalho',
      'Organizar promo√ß√µes de lojas online'
    ]
  ],
  [
    'question' => 'Por que acompanhar o valor da cesta b√°sica?',
    'correct' => 'Indica como os pre√ßos de itens essenciais est√£o mudando',
    'alternatives' => [
      'Mostra o lucro das grandes empresas',
      'Calcula a taxa de juros dos bancos',
      'Determina o valor das passagens a√©reas'
    ]
  ],
  [
    'question' => 'O que √© um gasto vari√°vel?',
    'correct' => 'Despesa que muda de valor conforme o uso, como conta de luz',
    'alternatives' => [
      'Pagamento fixo de aluguel',
      'Parcela igual do financiamento',
      'Sal√°rio recebido todo m√™s'
    ]
  ],
  [
    'question' => 'Qual estrat√©gia simples para evitar d√≠vidas com o cart√£o?',
    'correct' => 'Anotar cada compra e pagar a fatura integral',
    'alternatives' => [
      'Ignorar o extrato mensal',
      'Pagar apenas o valor m√≠nimo sempre',
      'Emprestar o cart√£o para v√°rias pessoas'
    ]
  ],
  [
    'question' => 'Por que conversar sobre dinheiro com a fam√≠lia √© importante?',
    'correct' => 'Ajuda todos a planejar juntos e evitar conflitos',
    'alternatives' => [
      'Faz as contas desaparecerem sozinhas',
      'Impede qualquer gasto com lazer',
      'Substitui a necessidade de metas pessoais'
    ]
  ],
];

foreach ($questions as &$question) {
    $options = array_merge([$question['correct']], $question['alternatives']);
    shuffle($options);
    $question['options'] = $options;
    $question['correctIndex'] = array_search($question['correct'], $options, true);
    unset($question['alternatives']);
}
unset($question);
shuffle($questions);
?>
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quiz Quem Quer Ser um Milion√°rio - Aula Interativa</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .option-btn[disabled] { cursor: not-allowed; }
  </style>
</head>
<body class="bg-slate-50 text-slate-900 min-h-screen">
  <div class="max-w-4xl mx-auto px-4 py-6">
    <header class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6">
      <div class="flex items-center gap-3">
        <div class="w-12 h-12 rounded-2xl bg-slate-900 text-white grid place-items-center font-bold">AF</div>
        <div>
          <h1 class="text-2xl font-extrabold">Quiz Quem Quer Ser um Milion√°rio</h1>
          <p class="text-sm text-slate-600">35 perguntas sobre capitalismo, finan√ßas e empreendedorismo</p>
        </div>
      </div>
      <a href="index.php" class="btn inline-flex items-center justify-center px-4 py-2 rounded-xl border border-slate-200 bg-white shadow-sm text-sm font-semibold hover:shadow transition">‚¨Ö Voltar √† aula</a>
    </header>

    <section class="bg-white rounded-3xl shadow-lg p-6 space-y-6">
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
        <div>
          <span class="inline-flex items-center gap-2 text-xs uppercase tracking-wide font-semibold text-slate-500">Pergunta <span id="questionNumber" class="text-slate-900">1</span> / 35</span>
          <h2 id="questionText" class="text-xl font-bold text-slate-900 mt-2"></h2>
        </div>
        <div class="flex flex-wrap items-center gap-2">
          <button id="lifelineOne" class="px-3 py-2 rounded-xl border border-amber-200 bg-amber-100 text-amber-900 text-sm font-semibold hover:bg-amber-200 transition">üß† Eliminar 1</button>
          <button id="lifelineTwo" class="px-3 py-2 rounded-xl border border-emerald-200 bg-emerald-100 text-emerald-900 text-sm font-semibold hover:bg-emerald-200 transition">üéØ Eliminar 2</button>
          <button id="skipQuestion" class="px-3 py-2 rounded-xl border border-indigo-200 bg-indigo-100 text-indigo-900 text-sm font-semibold hover:bg-indigo-200 transition">‚è≠ Pular</button>
          <button id="nextQuestion" class="px-3 py-2 rounded-xl border border-slate-200 bg-slate-100 text-slate-700 text-sm font-semibold hover:bg-slate-200 transition" disabled>Pr√≥xima pergunta</button>
        </div>
      </div>

      <div id="optionsContainer" class="grid gap-3"></div>

      <div id="feedback" class="text-base font-semibold"></div>

      <div class="flex items-center justify-between text-sm text-slate-500">
        <span id="studentsRemaining"><?php echo count($questions); ?> estudantes na fila</span>
        <span id="scoreBoard">Acertos: 0 ‚Ä¢ Erros: 0</span>
      </div>
    </section>
  </div>

  <script>
    const quizData = <?php echo json_encode($questions, JSON_UNESCAPED_UNICODE); ?>;

    const questionNumberEl = document.getElementById('questionNumber');
    const questionTextEl = document.getElementById('questionText');
    const optionsContainer = document.getElementById('optionsContainer');
    const feedbackEl = document.getElementById('feedback');
    const nextBtn = document.getElementById('nextQuestion');
    const lifelineOneBtn = document.getElementById('lifelineOne');
    const lifelineTwoBtn = document.getElementById('lifelineTwo');
    const skipQuestionBtn = document.getElementById('skipQuestion');
    const studentsRemainingEl = document.getElementById('studentsRemaining');
    const scoreBoardEl = document.getElementById('scoreBoard');

    let currentIndex = 0;
    let answered = false;
    let correctCount = 0;
    let wrongCount = 0;

    function updateStudentsRemaining() {
      const remaining = Math.max(0, quizData.length - currentIndex);
      studentsRemainingEl.textContent = `${remaining} estudante${remaining === 1 ? '' : 's'} na fila`;
    }

    function resetLifelines() {
      lifelineOneBtn.disabled = false;
      lifelineTwoBtn.disabled = false;
      skipQuestionBtn.disabled = false;
      lifelineOneBtn.classList.remove('opacity-50');
      lifelineTwoBtn.classList.remove('opacity-50');
      skipQuestionBtn.classList.remove('opacity-50');
    }

    function renderQuestion() {
      const q = quizData[currentIndex];
      questionNumberEl.textContent = currentIndex + 1;
      questionTextEl.textContent = q.question;
      feedbackEl.textContent = '';
      optionsContainer.innerHTML = '';
      answered = false;
      nextBtn.disabled = true;
      resetLifelines();
      updateStudentsRemaining();

      q.options.forEach((optionText, idx) => {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'option-btn w-full text-left px-4 py-3 rounded-2xl border border-slate-200 bg-slate-100 hover:bg-slate-200 transition text-base';
        btn.textContent = `${String.fromCharCode(65 + idx)}. ${optionText}`;
        btn.dataset.correct = idx === q.correctIndex ? 'true' : 'false';
        btn.addEventListener('click', () => handleAnswer(btn));
        optionsContainer.appendChild(btn);
      });
    }

    function disableOptions() {
      const buttons = optionsContainer.querySelectorAll('button');
      buttons.forEach(btn => btn.disabled = true);
    }

    function handleAnswer(button) {
      if (answered) return;
      answered = true;
      disableOptions();
      const isCorrect = button.dataset.correct === 'true';
      if (isCorrect) {
        button.classList.remove('bg-slate-100', 'border-slate-200');
        button.classList.add('bg-emerald-100', 'border-emerald-300');
        feedbackEl.textContent = 'Resposta correta! Parab√©ns!';
        feedbackEl.className = 'text-emerald-600 text-base font-semibold';
        correctCount++;
      } else {
        button.classList.remove('bg-slate-100', 'border-slate-200');
        button.classList.add('bg-rose-100', 'border-rose-300');
        feedbackEl.textContent = 'Resposta incorreta. Continue estudando!';
        feedbackEl.className = 'text-rose-600 text-base font-semibold';
        wrongCount++;
        const correctBtn = optionsContainer.querySelector('button[data-correct="true"]');
        if (correctBtn) {
          correctBtn.classList.remove('bg-slate-100', 'border-slate-200');
          correctBtn.classList.add('bg-emerald-100', 'border-emerald-300');
        }
      }
      scoreBoardEl.textContent = `Acertos: ${correctCount} ‚Ä¢ Erros: ${wrongCount}`;
      nextBtn.disabled = currentIndex >= quizData.length - 1;
      lifelineOneBtn.disabled = true;
      lifelineTwoBtn.disabled = true;
      skipQuestionBtn.disabled = true;
      lifelineOneBtn.classList.add('opacity-50');
      lifelineTwoBtn.classList.add('opacity-50');
      skipQuestionBtn.classList.add('opacity-50');
    }

    function eliminateOptions(amount) {
      const buttons = Array.from(optionsContainer.querySelectorAll('button'));
      const wrongButtons = buttons.filter(btn => btn.dataset.correct !== 'true' && btn.style.visibility !== 'hidden' && !btn.disabled);
      if (wrongButtons.length === 0) return;
      const toRemove = Math.min(amount, wrongButtons.length);
      for (let i = 0; i < toRemove; i++) {
        const idx = Math.floor(Math.random() * wrongButtons.length);
        const btn = wrongButtons.splice(idx, 1)[0];
        btn.style.visibility = 'hidden';
      }
    }

    lifelineOneBtn.addEventListener('click', () => {
      eliminateOptions(1);
      lifelineOneBtn.disabled = true;
      lifelineOneBtn.classList.add('opacity-50');
    });

    lifelineTwoBtn.addEventListener('click', () => {
      eliminateOptions(2);
      lifelineTwoBtn.disabled = true;
      lifelineTwoBtn.classList.add('opacity-50');
    });

    skipQuestionBtn.addEventListener('click', () => {
      if (answered) return;
      answered = true;
      disableOptions();
      const correctBtn = optionsContainer.querySelector('button[data-correct="true"]');
      if (correctBtn) {
        correctBtn.classList.remove('bg-slate-100', 'border-slate-200');
        correctBtn.classList.add('bg-emerald-100', 'border-emerald-300');
      }
      feedbackEl.textContent = 'Pergunta pulada! Veja a resposta correta e siga em frente.';
      feedbackEl.className = 'text-slate-600 text-base font-semibold';
      nextBtn.disabled = currentIndex >= quizData.length - 1;
      lifelineOneBtn.disabled = true;
      lifelineTwoBtn.disabled = true;
      skipQuestionBtn.disabled = true;
      lifelineOneBtn.classList.add('opacity-50');
      lifelineTwoBtn.classList.add('opacity-50');
      skipQuestionBtn.classList.add('opacity-50');
    });

    nextBtn.addEventListener('click', () => {
      if (currentIndex < quizData.length - 1) {
        currentIndex++;
        renderQuestion();
      }
    });

    renderQuestion();
  </script>
</body>
</html>
