<?php
$questions = [
  [
    'question' => 'Qual foi o principal objetivo do Plano Real iniciado em 1994?',
    'correct' => 'Controlar a hiperinflaÃ§Ã£o e estabilizar a economia brasileira',
    'alternatives' => [
      'Reduzir o desemprego com contrataÃ§Ãµes pÃºblicas em massa',
      'Criar um imposto Ãºnico sobre operaÃ§Ãµes financeiras',
      'Substituir o comÃ©rcio exterior por produÃ§Ã£o interna'
    ]
  ],
  [
    'question' => 'Qual indicador mede a variaÃ§Ã£o mÃ©dia dos preÃ§os ao consumidor no Brasil?',
    'correct' => 'IPCA (Ãndice de PreÃ§os ao Consumidor Amplo)',
    'alternatives' => [
      'FGTS (Fundo de Garantia do Tempo de ServiÃ§o)',
      'INCC (Ãndice Nacional da ConstruÃ§Ã£o Civil)',
      'IBOV (Ãndice Bovespa)'
    ]
  ],
  [
    'question' => 'O que significa dizer que um investimento teve rentabilidade real positiva?',
    'correct' => 'Ele rendeu acima da inflaÃ§Ã£o no perÃ­odo analisado',
    'alternatives' => [
      'Ele pagou juros simples e nÃ£o compostos',
      'Ele foi isento de imposto de renda',
      'Ele rendeu exatamente igual ao CDI'
    ]
  ],
  [
    'question' => 'Qual Ã© a principal funÃ§Ã£o do CDI na comparaÃ§Ã£o de investimentos de renda fixa?',
    'correct' => 'Servir como taxa de referÃªncia para remunerar aplicaÃ§Ãµes financeiras',
    'alternatives' => [
      'Definir o limite de crÃ©dito bancÃ¡rio para empresas',
      'Calcular o reajuste do salÃ¡rio mÃ­nimo',
      'Medir a inflaÃ§Ã£o oficial do paÃ­s'
    ]
  ],
  [
    'question' => 'Por que a diversificaÃ§Ã£o Ã© importante em investimentos?',
    'correct' => 'Reduz riscos ao distribuir o capital entre ativos diferentes',
    'alternatives' => [
      'Garante retornos acima de 20% ao ano',
      'Elimina completamente qualquer perda financeira',
      'Permite adiar o pagamento de impostos indefinidamente'
    ]
  ],
  [
    'question' => 'Qual foi um efeito direto da estabilizaÃ§Ã£o do Plano Real nas famÃ­lias brasileiras?',
    'correct' => 'Maior previsibilidade de preÃ§os e do poder de compra mensal',
    'alternatives' => [
      'ExtinÃ§Ã£o de todos os impostos federais',
      'Aumento imediato dos salÃ¡rios em dÃ³lar',
      'Desaparecimento do crÃ©dito bancÃ¡rio'
    ]
  ],
  [
    'question' => 'Em um grÃ¡fico logarÃ­tmico, o que acontece com variaÃ§Ãµes percentuais iguais?',
    'correct' => 'Elas passam a ter o mesmo espaÃ§amento visual independente do valor inicial',
    'alternatives' => [
      'Os valores negativos sÃ£o excluÃ­dos automaticamente',
      'O grÃ¡fico sempre vira uma linha reta horizontal',
      'Os nÃºmeros ficam limitados entre 0 e 1'
    ]
  ],
  [
    'question' => 'O que significa â€œcusto de oportunidadeâ€ no empreendedorismo?',
    'correct' => 'O ganho que deixamos de obter ao escolher uma alternativa em vez de outra',
    'alternatives' => [
      'O valor dos impostos pagos ao abrir uma empresa',
      'O preÃ§o mÃ­nimo de um produto para cobrir despesas fixas',
      'A diferenÃ§a entre lucro bruto e lucro lÃ­quido'
    ]
  ],
  [
    'question' => 'Qual Ã© um exemplo de ativo real utilizado como referÃªncia na aula?',
    'correct' => 'Cesta bÃ¡sica de SÃ£o Paulo monitorada pelo DIEESE',
    'alternatives' => [
      'Taxa Selic divulgada pelo Banco Central',
      'Ãndice Bovespa da B3',
      'CDI anual das instituiÃ§Ãµes financeiras'
    ]
  ],
  [
    'question' => 'Ao analisar o salÃ¡rio mÃ­nimo histÃ³rico, qual tendÃªncia se observa apÃ³s 1994?',
    'correct' => 'Aumento gradual do poder de compra com reajustes acima da inflaÃ§Ã£o em vÃ¡rios anos',
    'alternatives' => [
      'Queda constante do valor nominal do salÃ¡rio',
      'Congelamento completo dos reajustes por mais de 10 anos',
      'ValorizaÃ§Ã£o apenas quando hÃ¡ eleiÃ§Ãµes presidenciais'
    ]
  ],
  [
    'question' => 'O que diferencia o investimento em CDB 100% do CDI de deixar o dinheiro na poupanÃ§a?',
    'correct' => 'O CDB tende a render mais por seguir a taxa do CDI, enquanto a poupanÃ§a tem regra prÃ³pria',
    'alternatives' => [
      'O CDB Ã© garantido por ouro e a poupanÃ§a por dÃ³lar',
      'O CDB pode ter rendimento negativo garantido',
      'A poupanÃ§a nÃ£o pode ser resgatada antes de 5 anos'
    ]
  ],
  [
    'question' => 'Por que acompanhar a inflaÃ§Ã£o Ã© relevante para quem empreende?',
    'correct' => 'Porque ela impacta custos, preÃ§os de venda e planejamento financeiro do negÃ³cio',
    'alternatives' => [
      'Porque permite receber subsÃ­dios automÃ¡ticos do governo',
      'Porque determina o limite de funcionÃ¡rios que a empresa pode contratar',
      'Porque garante isenÃ§Ã£o de impostos federais'
    ]
  ],
  [
    'question' => 'Qual vantagem competitiva pode surgir ao entender o comportamento de consumo durante crises?',
    'correct' => 'Identificar oportunidades de produtos ou serviÃ§os mais resilientes',
    'alternatives' => [
      'Garantir que os concorrentes saiam do mercado por decreto',
      'Eliminar a necessidade de capital de giro',
      'Aumentar preÃ§os sem afetar a demanda'
    ]
  ],
  [
    'question' => 'Como o Big Mac Index ajuda a analisar a economia?',
    'correct' => 'Serve como comparaÃ§Ã£o informal do poder de compra entre paÃ­ses',
    'alternatives' => [
      'Define a taxa bÃ¡sica de juros da economia global',
      'Calcula o lucro das franquias de fast food',
      'Mede a produtividade das indÃºstrias automobilÃ­sticas'
    ]
  ],
  [
    'question' => 'Por que Ã© importante compreender a diferenÃ§a entre juros simples e compostos?',
    'correct' => 'Porque juros compostos fazem o capital render sobre ele mesmo ao longo do tempo',
    'alternatives' => [
      'Porque juros simples nÃ£o podem ser aplicados no Brasil',
      'Porque juros compostos dependem exclusivamente da inflaÃ§Ã£o',
      'Porque juros simples dobram o investimento todo mÃªs'
    ]
  ],
  [
    'question' => 'Qual atitude empreendedora Ã© destacada ao analisar a trajetÃ³ria de 1994 a 2025?',
    'correct' => 'Adaptar-se Ã s mudanÃ§as econÃ´micas com inovaÃ§Ã£o e controle financeiro',
    'alternatives' => [
      'Evitar qualquer tipo de crÃ©dito bancÃ¡rio',
      'Confiar apenas em investimentos em moeda estrangeira',
      'Copiar o modelo de negÃ³cios de grandes empresas sem ajustes'
    ]
  ],
  [
    'question' => 'Quando usamos um slider de anos no painel, qual habilidade financeira praticamos?',
    'correct' => 'Analisar sÃ©ries histÃ³ricas para entender tendÃªncias e ciclos econÃ´micos',
    'alternatives' => [
      'Calcular descontos comerciais imediatos',
      'Projetar balanÃ§os patrimoniais em tempo real',
      'Determinar o preÃ§o mÃ­nimo de importaÃ§Ã£o'
    ]
  ],
  [
    'question' => 'Qual Ã© o principal risco de basear um plano de negÃ³cios somente em cenÃ¡rios otimistas?',
    'correct' => 'Ignorar incertezas e ficar vulnerÃ¡vel a choques econÃ´micos inesperados',
    'alternatives' => [
      'Pagar impostos acima do necessÃ¡rio',
      'Ser obrigado a usar apenas capital prÃ³prio',
      'NÃ£o poder registrar a marca da empresa'
    ]
  ],
  [
    'question' => 'O que a simulaÃ§Ã£o da bolsa no aplicativo pretende demonstrar?',
    'correct' => 'A volatilidade e a incerteza dos retornos de renda variÃ¡vel',
    'alternatives' => [
      'Que a bolsa rende sempre mais que a renda fixa',
      'Que aÃ§Ãµes nÃ£o sofrem influÃªncia de notÃ­cias',
      'Que comprar aÃ§Ãµes elimina o risco de inflaÃ§Ã£o'
    ]
  ],
  [
    'question' => 'Por que entender o custo da cesta bÃ¡sica Ã© relevante para polÃ­ticas pÃºblicas?',
    'correct' => 'Porque revela o impacto do preÃ§o dos alimentos na renda das famÃ­lias',
    'alternatives' => [
      'Porque indica quais paÃ­ses sÃ£o mais ricos',
      'Porque substitui a necessidade de medir a inflaÃ§Ã£o',
      'Porque determina automaticamente o salÃ¡rio mÃ­nimo'
    ]
  ],
  [
    'question' => 'Qual prÃ¡tica financeira ajuda a construir reserva para oportunidades empreendedoras?',
    'correct' => 'Guardar regularmente parte da renda em investimentos de liquidez adequada',
    'alternatives' => [
      'Investir apenas em bens de consumo imediato',
      'Financiar o consumo com cartÃ£o de crÃ©dito rotativo',
      'Depender de sorteios e prÃªmios eventuais'
    ]
  ],
  [
    'question' => 'Ao eliminar duas alternativas erradas, qual habilidade crÃ­tica estÃ¡ sendo estimulada?',
    'correct' => 'Tomar decisÃµes com base em probabilidades e reduÃ§Ã£o de incertezas',
    'alternatives' => [
      'Garantir que a resposta correta apareÃ§a automaticamente',
      'Aumentar o nÃºmero de alternativas disponÃ­veis',
      'Evitar completamente o risco nas escolhas'
    ]
  ],
  [
    'question' => 'Qual relaÃ§Ã£o pode ser feita entre inflaÃ§Ã£o e planejamento de preÃ§os em um negÃ³cio?',
    'correct' => 'Ã‰ necessÃ¡rio reajustar preÃ§os periodicamente para preservar margens e competitividade',
    'alternatives' => [
      'PreÃ§os nÃ£o devem ser alterados para manter a fidelidade do cliente',
      'Reajustes sÃ³ podem ocorrer com autorizaÃ§Ã£o do governo federal',
      'A inflaÃ§Ã£o aumenta o lucro automaticamente sem mudar nada'
    ]
  ],
  [
    'question' => 'O que representa o salÃ¡rio mÃ­nimo em polÃ­ticas sociais?',
    'correct' => 'Um piso legal de remuneraÃ§Ã£o para proteger trabalhadores formais',
    'alternatives' => [
      'O limite mÃ¡ximo que uma empresa pode pagar',
      'Um Ã­ndice exclusivo para reajustar aposentadorias privadas',
      'A soma dos impostos que incidem sobre a folha'
    ]
  ],
  [
    'question' => 'Por que analisar dados histÃ³ricos ajuda na educaÃ§Ã£o financeira dos jovens?',
    'correct' => 'Porque permite aprender com o passado e projetar decisÃµes mais conscientes para o futuro',
    'alternatives' => [
      'Porque elimina a necessidade de estudar matemÃ¡tica',
      'Porque garante ganhos altos sem risco',
      'Porque torna desnecessÃ¡rio planejar objetivos financeiros'
    ]
  ],
];

foreach ($questions as &$question) {
    $options = array_merge([$question['correct']], $question['alternatives']);
    shuffle($options);
    $question['options'] = $options;
    $question['correctIndex'] = array_search($question['correct'], $options, true);
    unset($question['alternatives']);
}
unset($question);
shuffle($questions);
?>
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quiz Quem Quer Ser um MilionÃ¡rio - Aula Interativa</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .option-btn[disabled] { cursor: not-allowed; }
  </style>
</head>
<body class="bg-slate-50 text-slate-900 min-h-screen">
  <div class="max-w-4xl mx-auto px-4 py-6">
    <header class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6">
      <div class="flex items-center gap-3">
        <div class="w-12 h-12 rounded-2xl bg-slate-900 text-white grid place-items-center font-bold">AF</div>
        <div>
          <h1 class="text-2xl font-extrabold">Quiz Quem Quer Ser um MilionÃ¡rio</h1>
          <p class="text-sm text-slate-600">25 perguntas sobre capitalismo, finanÃ§as e empreendedorismo</p>
        </div>
      </div>
      <a href="index.php" class="btn inline-flex items-center justify-center px-4 py-2 rounded-xl border border-slate-200 bg-white shadow-sm text-sm font-semibold hover:shadow transition">â¬… Voltar Ã  aula</a>
    </header>

    <section class="bg-white rounded-3xl shadow-lg p-6 space-y-6">
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
        <div>
          <span class="inline-flex items-center gap-2 text-xs uppercase tracking-wide font-semibold text-slate-500">Pergunta <span id="questionNumber" class="text-slate-900">1</span> / 25</span>
          <h2 id="questionText" class="text-xl font-bold text-slate-900 mt-2"></h2>
        </div>
        <div class="flex flex-wrap items-center gap-2">
          <button id="lifelineOne" class="px-3 py-2 rounded-xl border border-amber-200 bg-amber-100 text-amber-900 text-sm font-semibold hover:bg-amber-200 transition">ðŸ§  Eliminar 1</button>
          <button id="lifelineTwo" class="px-3 py-2 rounded-xl border border-emerald-200 bg-emerald-100 text-emerald-900 text-sm font-semibold hover:bg-emerald-200 transition">ðŸŽ¯ Eliminar 2</button>
          <button id="nextQuestion" class="px-3 py-2 rounded-xl border border-slate-200 bg-slate-100 text-slate-700 text-sm font-semibold hover:bg-slate-200 transition" disabled>PrÃ³xima pergunta</button>
        </div>
      </div>

      <div id="optionsContainer" class="grid gap-3"></div>

      <div id="feedback" class="text-base font-semibold"></div>

      <div class="flex items-center justify-between text-sm text-slate-500">
        <span id="studentsRemaining">25 estudantes na fila</span>
        <span id="scoreBoard">Acertos: 0 â€¢ Erros: 0</span>
      </div>
    </section>
  </div>

  <script>
    const quizData = <?php echo json_encode($questions, JSON_UNESCAPED_UNICODE); ?>;

    const questionNumberEl = document.getElementById('questionNumber');
    const questionTextEl = document.getElementById('questionText');
    const optionsContainer = document.getElementById('optionsContainer');
    const feedbackEl = document.getElementById('feedback');
    const nextBtn = document.getElementById('nextQuestion');
    const lifelineOneBtn = document.getElementById('lifelineOne');
    const lifelineTwoBtn = document.getElementById('lifelineTwo');
    const studentsRemainingEl = document.getElementById('studentsRemaining');
    const scoreBoardEl = document.getElementById('scoreBoard');

    let currentIndex = 0;
    let answered = false;
    let correctCount = 0;
    let wrongCount = 0;

    function updateStudentsRemaining() {
      const remaining = Math.max(0, quizData.length - currentIndex);
      studentsRemainingEl.textContent = `${remaining} estudante${remaining === 1 ? '' : 's'} na fila`;
    }

    function resetLifelines() {
      lifelineOneBtn.disabled = false;
      lifelineTwoBtn.disabled = false;
      lifelineOneBtn.classList.remove('opacity-50');
      lifelineTwoBtn.classList.remove('opacity-50');
    }

    function renderQuestion() {
      const q = quizData[currentIndex];
      questionNumberEl.textContent = currentIndex + 1;
      questionTextEl.textContent = q.question;
      feedbackEl.textContent = '';
      optionsContainer.innerHTML = '';
      answered = false;
      nextBtn.disabled = true;
      resetLifelines();
      updateStudentsRemaining();

      q.options.forEach((optionText, idx) => {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'option-btn w-full text-left px-4 py-3 rounded-2xl border border-slate-200 bg-slate-100 hover:bg-slate-200 transition text-base';
        btn.textContent = `${String.fromCharCode(65 + idx)}. ${optionText}`;
        btn.dataset.correct = idx === q.correctIndex ? 'true' : 'false';
        btn.addEventListener('click', () => handleAnswer(btn));
        optionsContainer.appendChild(btn);
      });
    }

    function disableOptions() {
      const buttons = optionsContainer.querySelectorAll('button');
      buttons.forEach(btn => btn.disabled = true);
    }

    function handleAnswer(button) {
      if (answered) return;
      answered = true;
      disableOptions();
      const isCorrect = button.dataset.correct === 'true';
      if (isCorrect) {
        button.classList.remove('bg-slate-100', 'border-slate-200');
        button.classList.add('bg-emerald-100', 'border-emerald-300');
        feedbackEl.textContent = 'Resposta correta! ParabÃ©ns!';
        feedbackEl.className = 'text-emerald-600 text-base font-semibold';
        correctCount++;
      } else {
        button.classList.remove('bg-slate-100', 'border-slate-200');
        button.classList.add('bg-rose-100', 'border-rose-300');
        feedbackEl.textContent = 'Resposta incorreta. Continue estudando!';
        feedbackEl.className = 'text-rose-600 text-base font-semibold';
        wrongCount++;
        const correctBtn = optionsContainer.querySelector('button[data-correct="true"]');
        if (correctBtn) {
          correctBtn.classList.remove('bg-slate-100', 'border-slate-200');
          correctBtn.classList.add('bg-emerald-100', 'border-emerald-300');
        }
      }
      scoreBoardEl.textContent = `Acertos: ${correctCount} â€¢ Erros: ${wrongCount}`;
      nextBtn.disabled = currentIndex >= quizData.length - 1;
      lifelineOneBtn.disabled = true;
      lifelineTwoBtn.disabled = true;
      lifelineOneBtn.classList.add('opacity-50');
      lifelineTwoBtn.classList.add('opacity-50');
    }

    function eliminateOptions(amount) {
      const buttons = Array.from(optionsContainer.querySelectorAll('button'));
      const wrongButtons = buttons.filter(btn => btn.dataset.correct !== 'true' && btn.style.visibility !== 'hidden' && !btn.disabled);
      if (wrongButtons.length === 0) return;
      const toRemove = Math.min(amount, wrongButtons.length);
      for (let i = 0; i < toRemove; i++) {
        const idx = Math.floor(Math.random() * wrongButtons.length);
        const btn = wrongButtons.splice(idx, 1)[0];
        btn.style.visibility = 'hidden';
      }
    }

    lifelineOneBtn.addEventListener('click', () => {
      eliminateOptions(1);
      lifelineOneBtn.disabled = true;
      lifelineOneBtn.classList.add('opacity-50');
    });

    lifelineTwoBtn.addEventListener('click', () => {
      eliminateOptions(2);
      lifelineTwoBtn.disabled = true;
      lifelineTwoBtn.classList.add('opacity-50');
    });

    nextBtn.addEventListener('click', () => {
      if (currentIndex < quizData.length - 1) {
        currentIndex++;
        renderQuestion();
      }
    });

    renderQuestion();
  </script>
</body>
</html>
